(function(t){function e(e){for(var a,r,o=e[0],c=e[1],l=e[2],u=0,g=[];u<o.length;u++)r=o[u],s[r]&&g.push(s[r][0]),s[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);d&&d(e);while(g.length)g.shift()();return n.push.apply(n,l||[]),i()}function i(){for(var t,e=0;e<n.length;e++){for(var i=n[e],a=!0,o=1;o<i.length;o++){var c=i[o];0!==s[c]&&(a=!1)}a&&(n.splice(e--,1),t=r(r.s=i[0]))}return t}var a={},s={app:0},n=[];function r(e){if(a[e])return a[e].exports;var i=a[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=a,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(i,a,function(e){return t[e]}.bind(null,a));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var d=c;n.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"56d7":function(t,e,i){"use strict";i.r(e);i("cadf"),i("551c"),i("097d");var a=i("8bbf"),s=i.n(a),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("Home")],1)},r=[],o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"home"},["0"!=t.page||t.logined?t._e():i("div",{staticClass:"container-fluid h-100"},[i("div",{staticClass:"h-100 d-flex justify-content-center align-items-center flex-column"},[i("h3",{staticClass:"text-center goldText"},[t._v("18LUCK")]),i("h3",{staticClass:"mb-5 text-center goldText"},[t._v("PATRTY")]),i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.signinMember,expression:"signinMember"}],attrs:{placeholder:"請輸入您的名字"},domProps:{value:t.signinMember},on:{input:function(e){e.target.composing||(t.signinMember=e.target.value)}}}),i("div",{staticClass:"goldButton m-1 px-3",on:{click:t.signin}},[t._v("登入")])])])]),"0"!==t.page&&t.logined?i("div",{staticClass:"container-fluid"},[i("el-menu",{staticClass:"menu",attrs:{"default-active":t.page,mode:"horizontal","background-color":"#454A60","text-color":"#fff","active-text-color":"#C7B071"},on:{select:t.handleSelect}},[i("el-menu-item",{attrs:{index:"1",width:"25%"}},[t._v("報到登錄")]),i("el-menu-item",{attrs:{index:"2",width:"25%"}},[t._v("領獎登錄")]),i("el-menu-item",{attrs:{index:"3",width:"25%"}},[t._v("報到紀錄")]),i("el-menu-item",{attrs:{index:"4",width:"25%"}},[t._v("獎項紀錄")])],1),"1"==t.page|"2"==t.page?i("div",{staticClass:"capturer d-flex justify-content-between align-items-stretch flex-row"},[i("div",{staticClass:"QRCODE"},[i("qrcode-reader",{attrs:{camera:t.cameraSettings,track:!1,paused:t.paused},on:{decode:t.onDecode}})],1),i("div",{staticClass:"QRCODEResult d-flex align-items-center flex-column pt-5"},[t.errorQRcode?i("p",{staticClass:"text-warning"},[t._v(t._s(t.errorQRcode))]):t._e(),t.content.ex?i("h4",{staticClass:"text-warning"},[t._v(t._s(t.content.ex))]):t._e(),t.giftTitle?i("h4",{staticClass:"text-danger"},[t._v("恭喜您獲得 "+t._s(t.giftTitle))]):t._e(),i("p",{staticClass:"my-0"},[t._v(t._s(t.content.gid))]),i("p",{staticClass:"my-0"},[t._v(t._s(t.content.name))]),"1"==t.page&&t.loginOK?i("div",{staticClass:"sendButton",on:{click:t.addUser}},[i("i",{staticClass:"fas fa-thumbs-up mx-2"}),t._v("確認報到資料")]):t._e(),"1"==t.page&&t.content&&!t.loginOK?i("div",{staticClass:"reCapture",on:{click:t.unPauseCamera}},[i("i",{staticClass:"fas fa-sync-alt mx-2"}),t._v("已登入")]):t._e(),"2"==t.page&&t.grtGiftOK?i("div",{staticClass:"sendButton",on:{click:t.addGift}},[i("i",{staticClass:"fas fa-thumbs-up mx-2"}),t._v("確得獎者資料")]):t._e(),"2"==t.page&&t.content&&!t.grtGiftOK?i("div",{staticClass:"reCapture",on:{click:t.unPauseCamera}},[i("i",{staticClass:"fas fa-sync-alt mx-2"}),t._v("已領獎")]):t._e(),t.errorQRcode?i("div",{staticClass:"reCapture",on:{click:t.unPauseCamera}},[i("i",{staticClass:"fas fa-sync-alt mx-2"}),t._v("再次掃描")]):t._e()])]):t._e(),"1"==t.page?i("div",{staticClass:"reportWarp"},[i("div",{staticClass:"report px-3 py-1"},[i("p",{staticClass:"text-white"},[t._v("報到紀錄")]),i("div",t._l(t.party,function(e){return i("div",{staticClass:"reportiItem"},[i("div",{staticClass:"row no-gutters"},[t._m(0,!0),i("div",{staticClass:"col-11"},[i("p",[i("span",{staticClass:"goldText"},[t._v(t._s(e.data.name)+" ")]),i("span",{staticClass:"grayText"},[t._v(t._s(e.data.gid)+" ")])]),i("p",[i("span",[t._v(t._s(e.data.ex)+" ")]),i("span",{staticClass:"grayText"},[t._v(t._s(e.datetime)+" ")])])])])])}),0)])]):t._e(),"2"==t.page?i("div",{staticClass:"giftWarp"},[i("div",{staticClass:"report px-3 py-3"},[i("div",[i("div",{staticClass:"goldButton",on:{click:function(e){t.giftTitle="10獎"}}},[t._v("10獎")]),i("div",{staticClass:"goldButton",on:{click:function(e){t.giftTitle="9獎"}}},[t._v("9獎")]),i("div",{staticClass:"goldButton",on:{click:function(e){t.giftTitle="8獎"}}},[t._v("8獎")]),i("div",{staticClass:"goldButton",on:{click:function(e){t.giftTitle="7獎"}}},[t._v("7獎")]),i("div",{staticClass:"goldButton",on:{click:function(e){t.giftTitle="6獎"}}},[t._v("6獎")]),i("div",{staticClass:"goldButton",on:{click:function(e){t.giftTitle="5獎"}}},[t._v("5獎")]),i("div",{staticClass:"goldButton",on:{click:function(e){t.giftTitle="4獎"}}},[t._v("4獎")]),i("div",{staticClass:"goldButton",on:{click:function(e){t.giftTitle="3獎"}}},[t._v("3獎")]),i("div",{staticClass:"goldButton",on:{click:function(e){t.giftTitle="2獎"}}},[t._v("2獎")]),i("div",{staticClass:"goldButton",on:{click:function(e){t.giftTitle="1獎"}}},[t._v("1獎")]),i("span",{staticClass:"text-white"},[t._v("加碼: ")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.giftTitle,expression:"giftTitle"}],domProps:{value:t.giftTitle},on:{input:function(e){e.target.composing||(t.giftTitle=e.target.value)}}})]),i("div",t._l(t.gift,function(e){return i("div",{staticClass:"reportiItem"},[i("div",{staticClass:"row no-gutters"},[t._m(1,!0),i("div",{staticClass:"col-11"},[i("p",[i("span",{staticClass:"text-white"},[t._v(t._s(e.giftTitle)+" ")]),i("span",{staticClass:"goldText"},[t._v(t._s(e.data.name)+" ")]),i("span",{staticClass:"grayText"},[t._v(t._s(e.data.gid)+" ")])]),i("p",[i("span",[t._v(t._s(e.data.ex)+" ")]),i("span",{staticClass:"grayText"},[t._v(t._s(e.datetime))])])])])])}),0)])]):t._e(),"3"==t.page?i("div",{staticClass:"reportTotalData p-2"},[i("div",{staticClass:"w-100 p-2 text-center"},[i("span",{staticClass:"grayText"},[t._v("總人數")]),i("span",{staticClass:"goldText mr-2"},[t._v(t._s(t.party.length)+"  ")]),i("span",{staticClass:"grayText"},[t._v("ICS:")]),i("span",{staticClass:"goldText mr-2"},[t._v(" "+t._s(t.icsAllMembaer)+" ")]),i("span",{staticClass:"grayText"},[t._v("HG:")]),i("span",{staticClass:"goldText mr-2"},[t._v(" "+t._s(t.hgAllMembaer)+"  ")]),i("span",{staticClass:"grayText"},[t._v("HB:")]),i("span",{staticClass:"goldText mr-2"},[t._v(" "+t._s(t.hbAllMembaer)+" ")]),i("span",{staticClass:"grayText"},[t._v("L:")]),i("span",{staticClass:"goldText mr-2"},[t._v(" "+t._s(t.lAllMembaer)+" ")])])]):t._e(),"3"==t.page?i("div",{staticClass:"reportRecord"},[i("div",{staticClass:"report p-3"},t._l(t.party,function(e){return i("div",{staticClass:"reportiItem"},[i("div",{staticClass:"row no-gutters"},[t._m(2,!0),i("div",{staticClass:"col-11"},[i("p",[i("span",{staticClass:"goldText"},[t._v(t._s(e.data.name)+" ")]),i("span",{staticClass:"grayText"},[t._v(t._s(e.data.gid)+" ")])]),i("p",[i("span",[t._v(t._s(e.data.ex)+" ")]),i("span",{staticClass:"grayText"},[t._v(t._s(e.datetime)+" ")]),i("span",{staticClass:"float-right",on:{click:function(i){t.deleteData(e.id)}}},[t._v("刪除")])])])])])}),0)]):t._e(),"4"==t.page?i("div",{staticClass:"reportTotalData p-2"},[i("div",{staticClass:"w-100 p-2 text-center"},[i("span",{staticClass:"grayText"},[t._v("已領獎人數")]),i("span",{staticClass:"goldText mr-2"},[t._v(t._s(t.gift.length))])])]):t._e(),"4"==t.page?i("div",{staticClass:"reportRecord"},[i("div",{staticClass:"report p-3"},t._l(t.gift,function(e){return i("div",{staticClass:"reportiItem"},[i("div",{staticClass:"row no-gutters"},[t._m(3,!0),i("div",{staticClass:"col-11"},[i("p",[i("span",{staticClass:"text-white"},[t._v(t._s(e.giftTitle)+" ")]),i("span",{staticClass:"goldText"},[t._v(t._s(e.data.name)+" ")]),i("span",{staticClass:"grayText"},[t._v(t._s(e.data.gid)+" ")])]),i("p",[i("span",[t._v(t._s(e.data.ex)+" ")]),i("span",{staticClass:"grayText"},[t._v(t._s(e.datetime)+" ")]),i("span",{staticClass:"float-right",on:{click:function(i){t.deleteGift(e.id)}}},[t._v("刪除")])])])])])}),0)]):t._e()],1):t._e()])},c=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"col-1"},[i("span",{staticClass:"grayText"},[i("i",{staticClass:"fas fa-user mt-3 mx-2"})])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"col-1"},[i("span",{staticClass:"grayText"},[i("i",{staticClass:"fas fa-trophy mt-3 mx-2"})])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"col-1"},[i("span",{staticClass:"grayText"},[i("i",{staticClass:"fas fa-user mt-3 mx-2"})])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"col-1"},[i("span",{staticClass:"grayText"},[i("i",{staticClass:"fas fa-trophy mt-3 mx-2"})])])}],l=(i("96cf"),i("1da1")),d={data:function(){return{md:"",signinMember:"",logined:!1,page:"0",party:"",gift:"",admin:{name:"",time:"",device:""},user:{data:{},time:"",datetime:"",admin:{}},userGift:{data:{},giftTitle:"",time:"",datetime:"",admin:{}},cameraSettings:{audio:!1,video:{facingMode:{ideal:"environment"}}},paused:!1,content:"",isLogin:"",loginOK:!1,grtGiftOK:!1,giftTitle:"",errorQRcode:""}},firestore:function(){return{party:y.collection("party").orderBy("time","desc"),gift:y.collection("gift").orderBy("time","desc")}},computed:{icsAllMembaer:function(){var t=0;this.party.filter(function(e,i,a){e.data.gid.indexOf("ICS")>=0&&(t+=1)});return t},hgAllMembaer:function(){var t=0;this.party.filter(function(e,i,a){e.data.gid.indexOf("HG")>=0&&(t+=1)});return t},hbAllMembaer:function(){var t=0;this.party.filter(function(e,i,a){e.data.gid.indexOf("HB")>=0&&(t+=1)});return t},lAllMembaer:function(){var t=0;this.party.filter(function(e,i,a){e.data.gid.indexOf("L")>=0&&(t+=1)});return t}},methods:{signin:function(){this.signinMember&&(window.localStorage.setItem("admin",this.signinMember),window.localStorage.setItem("device",this.md.ua),window.localStorage.setItem("loginTime",this.getNowTime()),this.admin.name=this.signinMember,this.admin.time=this.md.ua,this.admin.device=this.getNowTime(),this.logined=!0,this.page="1")},checkLogined:function(){window.localStorage.admin?(this.admin.name=window.localStorage.admin,this.admin.time=window.localStorage.loginTime,this.admin.device=window.localStorage.device,this.logined=!0,this.page="1"):(this.logined=!1,this.page="0"),window.localStorage.setItem("loginTime",this.getNowTime())},handleSelect:function(t,e){this.page=t,this.content="",this.errorQRcode="",this.giftTitle="",this.isLogin="",this.unPauseCamera()},addUser:function(){var t=this;this.user.data=this.content,this.user.time=Date.now(),this.user.datetime=this.getNowTime(),this.user.admin=this.admin,y.collection("party").add(this.user).then(function(){t.user.data={},t.content={},t.giftTitle="",t.unPauseCamera()})},addGift:function(){var t=this;this.userGift.data=this.content,this.userGift.giftTitle=this.giftTitle,this.userGift.time=Date.now(),this.userGift.datetime=this.getNowTime(),this.userGift.admin=this.admin,y.collection("gift").add(this.userGift).then(function(){t.userGift.data="",t.content={},t.giftTitle="",t.unPauseCamera()})},deleteData:function(t){y.collection("party").doc(t).delete()},deleteGift:function(t){y.collection("gift").doc(t).delete()},onDecode:function(){var t=Object(l["a"])(regeneratorRuntime.mark(function t(e){var i,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:try{this.content=JSON.parse(e),this.pauseCamera(),"1"===this.page?(i=this.party.map(function(t,e){return t.data.gid}).indexOf(this.content.gid),console.log(i),i>=0?(this.isLogin="已登入",this.loginOK=!1):this.loginOK=!0):"2"===this.page&&(a=this.gift.map(function(t,e){return t.data.gid}).indexOf(this.content.gid),a>=0?(this.isLogin="已登入",this.grtGiftOK=!1):this.grtGiftOK=!0)}catch(s){this.errorQRcode="未知的QRcode",this.pauseCamera()}case 1:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),pauseCamera:function(){this.paused=!0},unPauseCamera:function(){this.content="",this.errorQRcode="",this.isLogin="",this.paused=!1,this.loginOK=!1,this.grtGiftOK=!1},sendLoginData:function(){},sendAwardData:function(){},getNowTime:function(){var t=new Date,e=t.getMonth()+1;e<10&&(e="0"+e);var i=t.getDate();i<10&&(i="0"+i);var a=t.getHours();a<10&&(a="0"+a);var s=t.getMinutes();s<10&&(s="0"+s);var n=t.getSeconds();return n<10&&(n="0"+n),t.getFullYear()+"-"+e+"-"+i+" "+a+":"+s+":"+n}},mounted:function(){if(this.md=new MobileDetect(window.navigator.userAgent),window.localStorage.loginTime){var t=new Date(window.localStorage.loginTime),e=new Date(this.getNowTime()),i=e.getTime()-t.getTime();i>864e5&&(window.localStorage.removeItem("member"),window.localStorage.removeItem("device"),window.localStorage.removeItem("loginTime"))}this.checkLogined()}},u=d,g=(i("a974"),i("2877")),f=Object(g["a"])(u,o,c,!1,null,"2cd81cac",null);f.options.__file="Home.vue";var p=f.exports,m={name:"app",components:{Home:p}},v=m,h=(i("5c0b"),Object(g["a"])(v,n,r,!1,null,null,null));h.options.__file="App.vue";var _=h.exports,C=i("9a3e"),x=i("0ff2"),w=i("59ca"),T=i.n(w);i("ea7b"),i("e71f");i.d(e,"db",function(){return y}),s.a.use(C["default"]),s.a.use(x["a"]),T.a.initializeApp({apiKey:"AIzaSyClxyWJX8P7ex5H53G0ymwlN0-6ycORxdw",authDomain:"party-dd1e4.firebaseapp.com",databaseURL:"https://party-dd1e4.firebaseio.com",projectId:"party-dd1e4",storageBucket:"party-dd1e4.appspot.com",messagingSenderId:"853310015177"}),T.a.firestore().settings({timestampsInSnapshots:!0}),s.a.config.productionTip=!1;var y=T.a.firestore();s.a.config.ignoredElements=["qrcode-reader","QrcodeReader"],new s.a({render:function(t){return t(_)}}).$mount("#app")},"5c0b":function(t,e,i){"use strict";var a=i("5e27"),s=i.n(a);s.a},"5e27":function(t,e,i){},"8bbf":function(t,e){t.exports=Vue},"9a23":function(t,e,i){},a974:function(t,e,i){"use strict";var a=i("9a23"),s=i.n(a);s.a}});
//# sourceMappingURL=app.2b618b30.js.map